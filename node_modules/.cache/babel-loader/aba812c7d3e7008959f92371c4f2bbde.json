{"ast":null,"code":"import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport Operatorhtml from './operator.html';\nimport store from '../../../store/store';\nimport socketIOClient from \"socket.io-client\";\nimport { getDoc } from '../../../actions/doctors';\nvar socket;\n\nclass Operator extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggleDoc = (index, key) => {\n      console.log(index);\n      let list = this.state.doctorsList;\n      console.log(list[index].status);\n      list[index].status = !list[index].status;\n      console.log(list[index].status);\n      this.setState({\n        doctorsList: list\n      });\n    };\n\n    this.toggle = (e, key) => {\n      if (key.toLowerCase() === 'online') {\n        this.setState({\n          status: 'Online'\n        });\n      } else {\n        this.setState({\n          status: 'Offline'\n        });\n      }\n    };\n\n    this.processDoc = docList => {\n      console.log(docList);\n      this.setState({\n        doctorsList: docList.data\n      });\n    };\n\n    this.disconnect = val => {\n      socket.emit('disconnect-patient', val.id);\n      console.log(val);\n    };\n\n    this.connect = val => {\n      socket.emit('connect-to-doctor', val.id);\n      console.log(val);\n    };\n\n    this.renderData = () => {\n      console.log(this.state.data);\n      return null;\n    };\n\n    this.state = {\n      endpoint: 'http://localhost:3002',\n      status: 'Offline',\n      doctorsList: [{\n        id: '101',\n        name: 'Dr Test 1',\n        status: true\n      }]\n    };\n  }\n\n  componentDidMount() {\n    store.dispatch(getDoc({\n      fn: this.processDoc,\n      scope: this\n    }));\n    socket = socketIOClient(this.state.endpoint, {\n      query: `operator=${this.props.authenticate ? this.props.authenticate.info.name : 'test'}`\n    });\n    socket.on('patients', patients => {\n      this.setState({\n        data: patients\n      });\n    });\n  }\n\n  render() {\n    return Operatorhtml.call(this);\n  }\n\n}\n\nconst matchStateToProps = state => ({\n  authenticate: state.authenticate\n});\n\nexport default withRouter(connect(matchStateToProps)(Operator));","map":{"version":3,"sources":["/Users/adityarola/Downloads/covidclinicreact/src/modules/user/operator/operator.js"],"names":["Component","connect","withRouter","Operatorhtml","store","socketIOClient","getDoc","socket","Operator","constructor","props","toggleDoc","index","key","console","log","list","state","doctorsList","status","setState","toggle","e","toLowerCase","processDoc","docList","data","disconnect","val","emit","id","renderData","endpoint","name","componentDidMount","dispatch","fn","scope","query","authenticate","info","on","patients","render","call","matchStateToProps"],"mappings":"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","sourcesContent":["import {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {withRouter} from 'react-router'\nimport Operatorhtml from './operator.html'\nimport store from '../../../store/store'\n\nimport socketIOClient from \"socket.io-client\";\nimport { getDoc } from '../../../actions/doctors';\n\n\n\n\nvar socket;\nclass Operator extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            endpoint:'http://localhost:3002',\n            status : 'Offline',\n            doctorsList :[\n                {\n                    id:'101',\n                    name: 'Dr Test 1',\n                    status: true\n                }\n            ]\n        }\n         \n    }\n\n    toggleDoc = (index,key)=>{\n        console.log(index);\n        let list = this.state.doctorsList;\n        console.log(list[index].status)\n        list[index].status = !list[index].status;\n        console.log(list[index].status)\n        this.setState({doctorsList:list});\n        \n    }\n\n    toggle = (e,key)=>{\n        if(key.toLowerCase() === 'online'){\n            this.setState({status:'Online'});\n        }else{\n            this.setState({status:'Offline'});\n        }\n    }\n\n    processDoc = (docList) =>{\n        console.log(docList)\n        this.setState({doctorsList:docList.data});\n    }\n\n    disconnect = (val) =>{\n        socket.emit('disconnect-patient', val.id)\n        console.log(val);\n    }\n\n    connect = (val) =>{\n        socket.emit('connect-to-doctor', val.id)\n        console.log(val);\n    }\n\n    renderData= ()=>{\n        console.log(this.state.data);\n        return null;\n    }\n\n    componentDidMount(){\n        store.dispatch(getDoc({fn:this.processDoc,scope:this}))\n        socket = socketIOClient(this.state.endpoint,{query: `operator=${this.props.authenticate?this.props.authenticate.info.name:'test'}`});\n        socket.on('patients',patients => {this.setState({data:patients})});\n\n    }\n\n    render(){\n        return Operatorhtml.call(this);\n    }\n\n\n}\n\n\nconst matchStateToProps = state => ({\n    authenticate : state.authenticate\n})\n\nexport default withRouter(connect(matchStateToProps)(Operator))\n"]},"metadata":{},"sourceType":"module"}