{"ast":null,"code":"import { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport RegisterHtml from './register.html';\nimport store from '../../../store/store';\nimport toastr from 'toastr';\nimport { auth } from '../../../actions/authenticate';\n\nclass Register extends Component {\n  constructor(props) {\n    super(props);\n\n    this.afterAuth = data => {\n      console.log(data);\n\n      if (data && data.data) {\n        if (data.data.role.toLowerCase() === 'operator') {\n          this.props.history.push('/operator');\n        } else {\n          this.props.history.push('/patient');\n        }\n      }\n    };\n\n    this.handleAuth = e => {\n      e.preventDefault();\n\n      if (this.state.username === '' || this.state.password === '') {\n        toastr.error(\"Please enter username and password\");\n      } else if (this.state.username.trim() === '' || this.state.password.trim() === '') {\n        toastr.error(\"Please enter username and password\");\n      }\n\n      store.dispatch(auth({\n        email: this.state.username,\n        password: this.state.password\n      }, {\n        fn: this.afterAuth,\n        scope: this\n      }));\n    };\n\n    this.register = () => {\n      this.props.history.push('/register');\n    };\n\n    this.state = {\n      username: '',\n      password: ''\n    };\n  }\n\n  render() {\n    return RegisterHtml.call(this);\n  }\n\n}\n\nconst matchStateToProps = state => ({\n  authenticate: state.authenticate\n});\n\nexport default withRouter(connect(matchStateToProps)(Register));","map":{"version":3,"sources":["/Users/adityarola/Downloads/covidclinicreact/src/modules/user/register/register.js"],"names":["Component","connect","withRouter","RegisterHtml","store","toastr","auth","Register","constructor","props","afterAuth","data","console","log","role","toLowerCase","history","push","handleAuth","e","preventDefault","state","username","password","error","trim","dispatch","email","fn","scope","register","render","call","matchStateToProps","authenticate"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,OAAxB;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,UAAR,QAAyB,cAAzB;AACA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,OAAOC,KAAP,MAAkB,sBAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,SAAQC,IAAR,QAAmB,+BAAnB;;AAGA,MAAMC,QAAN,SAAuBP,SAAvB,CAAiC;AAC7BQ,EAAAA,WAAW,CAACC,KAAD,EAAO;AACd,UAAMA,KAAN;;AADc,SAQlBC,SARkB,GAQLC,IAAD,IAAS;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;;AACA,UAAGA,IAAI,IAAIA,IAAI,CAACA,IAAhB,EAAqB;AACjB,YAAGA,IAAI,CAACA,IAAL,CAAUG,IAAV,CAAeC,WAAf,OAAiC,UAApC,EAA+C;AAC/C,eAAKN,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB;AACC,SAFD,MAEK;AACL,eAAKR,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,UAAxB;AACC;AACJ;AACJ,KAjBiB;;AAAA,SAmBlBC,UAnBkB,GAmBJC,CAAD,IAAK;AACdA,MAAAA,CAAC,CAACC,cAAF;;AACA,UAAG,KAAKC,KAAL,CAAWC,QAAX,KAAwB,EAAxB,IAA8B,KAAKD,KAAL,CAAWE,QAAX,KAAwB,EAAzD,EAA4D;AACxDlB,QAAAA,MAAM,CAACmB,KAAP,CAAa,oCAAb;AACH,OAFD,MAEM,IAAG,KAAKH,KAAL,CAAWC,QAAX,CAAoBG,IAApB,OAA+B,EAA/B,IAAqC,KAAKJ,KAAL,CAAWE,QAAX,CAAoBE,IAApB,OAA+B,EAAvE,EAA0E;AAC5EpB,QAAAA,MAAM,CAACmB,KAAP,CAAa,oCAAb;AACH;;AAEDpB,MAAAA,KAAK,CAACsB,QAAN,CAAiBpB,IAAI,CAAC;AAACqB,QAAAA,KAAK,EAAC,KAAKN,KAAL,CAAWC,QAAlB;AAA2BC,QAAAA,QAAQ,EAAC,KAAKF,KAAL,CAAWE;AAA/C,OAAD,EAA0D;AAACK,QAAAA,EAAE,EAAC,KAAKlB,SAAT;AAAmBmB,QAAAA,KAAK,EAAC;AAAzB,OAA1D,CAArB;AAEH,KA7BiB;;AAAA,SA+BlBC,QA/BkB,GA+BP,MAAK;AACZ,WAAKrB,KAAL,CAAWO,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB;AACH,KAjCiB;;AAEd,SAAKI,KAAL,GAAa;AACTC,MAAAA,QAAQ,EAAC,EADA;AAETC,MAAAA,QAAQ,EAAC;AAFA,KAAb;AAIH;;AA6BDQ,EAAAA,MAAM,GAAE;AACJ,WAAO5B,YAAY,CAAC6B,IAAb,CAAkB,IAAlB,CAAP;AACH;;AAtC4B;;AAwCjC,MAAMC,iBAAiB,GAAGZ,KAAK,KAAK;AAChCa,EAAAA,YAAY,EAAGb,KAAK,CAACa;AADW,CAAL,CAA/B;;AAIA,eAAehC,UAAU,CAACD,OAAO,CAACgC,iBAAD,CAAP,CAA2B1B,QAA3B,CAAD,CAAzB","sourcesContent":["import {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {withRouter} from 'react-router'\nimport RegisterHtml from './register.html'\nimport store from '../../../store/store'\nimport toastr from 'toastr'\n\nimport {auth} from '../../../actions/authenticate';\n\n\nclass Register extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            username:'',\n            password:'',\n        }\n    }\n\n    afterAuth = (data) =>{\n        console.log(data);\n        if(data && data.data){\n            if(data.data.role.toLowerCase() === 'operator'){\n            this.props.history.push('/operator')\n            }else{\n            this.props.history.push('/patient')\n            }\n        }\n    }\n\n    handleAuth = (e)=>{\n        e.preventDefault();\n        if(this.state.username === '' || this.state.password === ''){\n            toastr.error(\"Please enter username and password\");\n        }else if(this.state.username.trim() === '' || this.state.password.trim() === ''){\n            toastr.error(\"Please enter username and password\");\n        }\n\n        store.dispatch(((auth({email:this.state.username,password:this.state.password},{fn:this.afterAuth,scope:this}))));\n\n    }\n\n    register = () =>{\n        this.props.history.push('/register')\n    }\n\n    render(){\n        return RegisterHtml.call(this);\n    }\n}\nconst matchStateToProps = state => ({\n    authenticate : state.authenticate\n})\n\nexport default withRouter(connect(matchStateToProps)(Register))\n"]},"metadata":{},"sourceType":"module"}