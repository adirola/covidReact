{"ast":null,"code":"import _classCallCheck from\"/Users/adityarola/Downloads/covidclinicreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/adityarola/Downloads/covidclinicreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/adityarola/Downloads/covidclinicreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"/Users/adityarola/Downloads/covidclinicreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/adityarola/Downloads/covidclinicreact/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import{Component}from'react';import{connect}from'react-redux';import{withRouter}from'react-router';import Operatorhtml from'./operator.html';import store from'../../../store/store';import toastr from'toastr';import socketIOClient from\"socket.io-client\";import{getDoc,toggleStatus}from'../../../actions/doctors';import{Env}from'../../../api.config';var socket;var Operator=/*#__PURE__*/function(_Component){_inherits(Operator,_Component);var _super=_createSuper(Operator);function Operator(props){var _this;_classCallCheck(this,Operator);_this=_super.call(this,props);_this.toggleDoc=function(index,key){store.dispatch(toggleStatus(_this.state.doctorsList[index]._id,{fn:_this.syncList,scope:_assertThisInitialized(_this)}));};_this.syncList=function(data){if(data.status===200){toastr.success(\"status change successfull\");}else{toastr.error(\"status change unsuccessfull\");}store.dispatch(getDoc({fn:_this.processDoc,scope:_assertThisInitialized(_this)}));};_this.toggle=function(e,key){if(key.toLowerCase()==='online'){_this.setState({status:'Online'});}else{_this.setState({status:'Offline'});}};_this.processDoc=function(docList){_this.setState({doctorsList:docList.data});};_this.disconnect=function(val){socket.emit('disconnect-patient',val._id);};_this.connect=function(val){socket.emit('connect-to-doctor',val._id);};_this.state={endpoint:Env.getSocketUrl(),status:'Offline',doctorsList:[]};return _this;}_createClass(Operator,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;console.log(this.props.authenticate.info);store.dispatch(getDoc({fn:this.processDoc,scope:this}));socket=socketIOClient(this.state.endpoint,{query:\"operator=\".concat(this.props.authenticate&&this.props.authenticate.info?this.props.authenticate.info.data.name:'test')});socket.on('patients',function(patients){_this2.setState({data:patients});});}},{key:\"render\",value:function render(){return Operatorhtml.call(this);}}]);return Operator;}(Component);var matchStateToProps=function matchStateToProps(state){return{authenticate:state.authenticate};};export default withRouter(connect(matchStateToProps)(Operator));","map":{"version":3,"sources":["/Users/adityarola/Downloads/covidclinicreact/src/modules/user/operator/operator.js"],"names":["Component","connect","withRouter","Operatorhtml","store","toastr","socketIOClient","getDoc","toggleStatus","Env","socket","Operator","props","toggleDoc","index","key","dispatch","state","doctorsList","_id","fn","syncList","scope","data","status","success","error","processDoc","toggle","e","toLowerCase","setState","docList","disconnect","val","emit","endpoint","getSocketUrl","console","log","authenticate","info","query","name","on","patients","call","matchStateToProps"],"mappings":"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","sourcesContent":["import {Component} from 'react'\nimport {connect} from 'react-redux'\nimport {withRouter} from 'react-router'\nimport Operatorhtml from './operator.html'\nimport store from '../../../store/store'\nimport toastr from 'toastr'\nimport socketIOClient from \"socket.io-client\";\nimport { getDoc,toggleStatus } from '../../../actions/doctors';\nimport { Env } from '../../../api.config';\n\n\n\n\nvar socket;\nclass Operator extends Component {\n    constructor(props){\n        super(props)\n        this.state = {\n            endpoint:Env.getSocketUrl(),\n            status : 'Offline',\n            doctorsList :[]\n        }\n         \n    }\n\n    toggleDoc = (index,key)=>{\n        store.dispatch(toggleStatus(this.state.doctorsList[index]._id,{fn:this.syncList,scope:this}))\n    }\n\n    syncList = (data)=>{\n        if(data.status === 200){\n            toastr.success(\"status change successfull\");\n        }else{\n            toastr.error(\"status change unsuccessfull\");\n        }\n        store.dispatch(getDoc({fn:this.processDoc,scope:this}))\n    }\n\n    toggle = (e,key)=>{\n        if(key.toLowerCase() === 'online'){\n            this.setState({status:'Online'});\n        }else{\n            this.setState({status:'Offline'});\n        }\n    }\n\n    processDoc = (docList) =>{\n        this.setState({doctorsList:docList.data});\n    }\n\n    disconnect = (val) =>{\n        socket.emit('disconnect-patient', val._id)\n    }\n\n    connect = (val) =>{\n        socket.emit('connect-to-doctor', val._id)\n    }\n\n    componentDidMount(){\n        console.log(this.props.authenticate.info);\n        store.dispatch(getDoc({fn:this.processDoc,scope:this}))\n        socket = socketIOClient(this.state.endpoint,{query: `operator=${this.props.authenticate&&this.props.authenticate.info ?this.props.authenticate.info.data.name:'test'}`});\n        socket.on('patients',patients => {this.setState({data:patients})});\n    }\n\n    render(){\n        return Operatorhtml.call(this);\n    }\n\n\n}\n\n\nconst matchStateToProps = state => ({\n    authenticate : state.authenticate\n})\n\nexport default withRouter(connect(matchStateToProps)(Operator))\n"]},"metadata":{},"sourceType":"module"}